<!DOCTYPE html>
<html lang="en">

<head>
    <title></title>
    <meta charset="utf-8" />
    <link href="https://fonts.googleapis.com/css?family=Roboto|Roboto+Condensed:300,400|Muli:300,400" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">

</head>

<body class="red payment">
    <nav>
        <ul>
            <li class="step-1"><a href="#">Tickets</a></li>
            <li class="step-2 current"><a href="#">Payment</a></li>
            <li class="step-3"><a href="#">Confirmation</a></li>
        </ul>
    </nav>
    <main>

        <div class="payment-container">
            <aside class="order-summary">
                <div class="red">
                    <div>
                        <h2>Order<br /> Summary</h2>
                        <div class="date-and-time">
                            <p class="small">Date:</p>
                            <p class="medium">Saturday 8 July</p>
                            <p class="small">Time:</p>
                            <p class="medium">14:10</p>
                        </div>
                        <div class="summary">
                            <div class="row">
                                <div class="item">2 x Adult</div>
                                <div class="price">£42</div>
                            </div>
                            <div class="row">
                                <div class="item">1 x Student</div>
                                <div class="price">£20</div>
                            </div>
                            <div class="row">
                                <div class="item">Booking Fee</div>
                                <div class="price">£2</div>
                            </div>
                        </div>
                        <div class="total">
                            <div class="row">
                                <div class="item">Total</div>
                                <div class="price">£64</div>
                            </div>
                        </div>
                        <a href="#" class="change-selection">Change ticket selection</a>
                    </div>
                </div>
                <div class="blue">
                    <div>
                        <h3>All tickets include</h3>
                        <hr>
                        <p>75 minute tour of London's <br>top attractions</p>

                        <p>Choice of seat on upper or <br>lower deck</p>

                        <p>Guaranteed authentic travel in <br>1960's routemaster bus</p>
                    </div>
                </div>


            </aside>
            <div class="review-and-pay">
                <div class="inner">
                    <h1>Review and pay</h1>
                    <h4>Payment Details</h4>
                    <div class="form-table">

                        <div class="row">
                            <label for="card-type">Card type</label>
                            <div class="full-width">
                                <div class="select">
                                    <select name="card-type" id="">
                                        <option value="0">Visa</option>
                                        <option value="1">Mastercard</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <label for="cardnumber">Card number</label>
                            <div class="full-width">
                                <div class="text-select">
                                    <input type="tel" id="cardnumber" name="cardnumber" autocomplete="cc-number">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <label for="exp_month">Expiry Date</label>
                            <div class="month-width inline-block">
                                <div class="select">
                                    <select name="exp_month" id="">
                                        <option value="1">1 - January</option>
                                        <option value="2">2 - February</option>
                                        <option value="3">etc</option>
                                    </select>
                                </div>
                            </div>
                            <div class="year-width inline-block">
                                <div class="select">
                                    <select name="exp_month" id="">
                                        <option value="2018">2018</option>
                                        <option value="2019">2019</option>
                                        <option value="2020">etc</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <label for="ccv">Security Code</label>
                            <div class="text-select inline-block ccv-width">
                                <input type="tel" name="cc_number" maxlength="3" pattern="([0-9]|[0-9]|[0-9])">
                            </div>
                            <div class="inline-block ccv-img">
                                <img src="ccv.png" alt="" class="ccv-img">
                            </div>
                        </div>

                        <h4>Your Billing Address</h4>

                        <!-- 
                            n.b I've matched the form field name to Google's 
                            recommended to trigger autocomplete of name / card details
                            https://developers.google.com/web/updates/2015/06/checkout-faster-with-autofill
                        -->
                        <div class="row flexbox">
                            <div class="column title">
                                <label for="title">
                                    Title
                                </label>
                                <div class="text-select">
                                    <input type="text" name="title">
                                </div>
                            </div>
                            <div class="column first">
                                <label for="fname">
                                    First name
                                </label>
                                <div class="text-select">
                                    <input type="text" name="fname" required autocomplete="name">
                                </div>
                            </div>
                            <div class="column last">
                                <label for="lname">
                                    Last name
                                </label>
                                <div class="text-select">
                                    <input type="text" name="lname" required autocomplete="name">
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <label for="address-line1">Address line 1</label>
                            <div class="full-width">
                                <div class="text-select">
                                    <input type="text" name="address-line1" autocomplete="shipping street-address">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <label for="address-line2">Address line 2</label>
                            <div class="full-width">
                                <div class="text-select">
                                    <input type="tel" name="address-line2">
                                </div>
                            </div>
                        </div>
                        <div class="row flexbox">
                            <div class="column postcode">
                                <label for="postcode">
                                    Postcode
                                </label>
                                <div class="text-select">
                                    <input type="text" name="postcode" autocomplete="shipping postal-code">
                                </div>
                            </div>
                            <div class="column city">
                                <label for="region">
                                    City
                                </label>
                                <div class="text-select">
                                    <input type="text" name="region" required autocomplete="shipping region">
                                </div>
                            </div>

                        </div>
                        <div class="row">
                            <label for="country">Country</label>
                            <div class="full-width">
                                <div class="select">
                                    <select name="country" autocomplete="shipping country">
                                        <option value="gb">United Kingdom</option>
                                        <option value="etc">etc</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <h4>Email Address</h4>
                        <div class="row">
                            <label for="email">We will send your ticket(s) to this address</label>
                            <div class="full-width email">
                                <div class="text-select">
                                    <input type="email" name="email" placeholder="name@example.com" autocomplete="email">
                                </div>
                            </div>
                        </div>


                        <h4>Your Items</h4>
                        <div class="summary">
                            <div class="row">
                                <div class="item">2 x Adult</div>
                                <div class="price">£42</div>
                            </div>
                            <div class="row">
                                <div class="item">1 x Student</div>
                                <div class="price">£20</div>
                            </div>
                            <div class="row">
                                <div class="item">Booking Fee</div>
                                <div class="price">£2</div>
                            </div>
                        </div>
                        <div class="total">
                                <a href="#" class="change-selection">Change ticket selection</a>
                                <div class="item">Total</div>
                                <div class="price">£64</div>
                        </div>

                    </div>
                    <div class="finish-and-pay">
                            <button>Finish and pay</button>
                    </div>
                    
                </div>

            </div>
        </div>



    </main>

<!-- Optional JS to format credit card field - perhapy you already have your own solution but just wanted to have one for the demo -->
<script>
input_credit_card = function(input)
{
    var format_and_pos = function(char, backspace)
    {
        var start = 0;
        var end = 0;
        var pos = 0;
        var separator = " ";
        var value = input.value;

        if (char !== false)
        {
            start = input.selectionStart;
            end = input.selectionEnd;

            if (backspace && start > 0) // handle backspace onkeydown
            {
                start--;

                if (value[start] == separator)
                { start--; }
            }
            // To be able to replace the selection if there is one
            value = value.substring(0, start) + char + value.substring(end);

            pos = start + char.length; // caret position
        }

        var d = 0; // digit count
        var dd = 0; // total
        var gi = 0; // group index
        var newV = "";
        var groups = /^\D*3[47]/.test(value) ? // check for American Express
        [4, 6, 5] : [4, 4, 4, 4];

        for (var i = 0; i < value.length; i++)
        {
            if (/\D/.test(value[i]))
            {
                if (start > i)
                { pos--; }
            }
            else
            {
                if (d === groups[gi])
                {
                    newV += separator;
                    d = 0;
                    gi++;

                    if (start >= i)
                    { pos++; }
                }
                newV += value[i];
                d++;
                dd++;
            }
            if (d === groups[gi] && groups.length === gi + 1) // max length
            { break; }
        }
        input.value = newV;

        if (char !== false)
        { input.setSelectionRange(pos, pos); }
    };

    input.addEventListener('keypress', function(e)
    {
        var code = e.charCode || e.keyCode || e.which;

        // Check for tab and arrow keys (needed in Firefox)
        if (code !== 9 && (code < 37 || code > 40) &&
        // and CTRL+C / CTRL+V
        !(e.ctrlKey && (code === 99 || code === 118)))
        {
            e.preventDefault();

            var char = String.fromCharCode(code);

            // if the character is non-digit
            // OR
            // if the value already contains 15/16 digits and there is no selection
            // -> return false (the character is not inserted)

            if (/\D/.test(char) || (this.selectionStart === this.selectionEnd &&
            this.value.replace(/\D/g, '').length >=
            (/^\D*3[47]/.test(this.value) ? 15 : 16))) // 15 digits if Amex
            {
                return false;
            }
            format_and_pos(char);
        }
    });
    
    // backspace doesn't fire the keypress event
    input.addEventListener('keydown', function(e)
    {
        if (e.keyCode === 8 || e.keyCode === 46) // backspace or delete
        {
            e.preventDefault();
            format_and_pos('', this.selectionStart === this.selectionEnd);
        }
    });
    
    input.addEventListener('paste', function()
    {
        // A timeout is needed to get the new value pasted
        setTimeout(function(){ format_and_pos(''); }, 50);
    });
    
    input.addEventListener('blur', function()
    {
    	// reformat onblur just in case (optional)
        format_and_pos(this, false);
    });
};

input_credit_card(document.getElementById('cardnumber'));
</script>
</body>

</html>